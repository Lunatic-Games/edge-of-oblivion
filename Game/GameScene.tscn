[gd_scene load_steps=9 format=2]

[ext_resource path="res://Game/GameScene.gd" type="Script" id=1]
[ext_resource path="res://Assets/art/misc/blank_grey.png" type="Texture" id=2]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform vec2 direction = vec2(1, 0);
uniform float speed = 0.1;
uniform sampler2D noise;

vec4 overlay(vec4 base, vec4 blend){
	vec4 limit = step(0.5, base);
	return mix(2.0 * base * blend, 1.0 - 2.0 * (1.0 - base) * (1.0 - blend), limit);
}

void fragment()
{
	// image texture
	vec4 base = texture(TEXTURE, UV);
	// noise texture
	vec4 blend = texture(noise, UV + ( direction * speed * TIME));
	
	COLOR = overlay(base, blend);
}"

[sub_resource type="OpenSimplexNoise" id=3]

[sub_resource type="NoiseTexture" id=4]
seamless = true
noise = SubResource( 3 )

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/direction = Vector2( 0.5, 1 )
shader_param/speed = 0.02
shader_param/noise = SubResource( 4 )

[sub_resource type="StyleBoxFlat" id=5]
bg_color = Color( 0.623529, 0.321569, 0.8, 1 )

[sub_resource type="StyleBoxFlat" id=6]
bg_color = Color( 0.737255, 0.803922, 0.807843, 0.403922 )

[node name="GameScene" type="Node2D"]
pause_mode = 2
script = ExtResource( 1 )

[node name="BackgroundEffect" type="CanvasLayer" parent="."]
layer = -1

[node name="BackgroundNoise" type="TextureRect" parent="BackgroundEffect"]
modulate = Color( 0.152941, 0.152941, 0.266667, 1 )
show_behind_parent = true
material = SubResource( 2 )
margin_right = 1036.0
margin_bottom = 869.0
texture = ExtResource( 2 )
expand = true

[node name="Canvas" type="CanvasLayer" parent="."]

[node name="GameOver" type="VBoxContainer" parent="Canvas"]
visible = false
margin_left = 429.0
margin_top = 28.0
margin_right = 615.0
margin_bottom = 575.0
alignment = 1

[node name="GameOverText" type="RichTextLabel" parent="Canvas/GameOver"]
margin_top = 242.0
margin_right = 186.0
margin_bottom = 257.0
bbcode_enabled = true
bbcode_text = "[center][shake][color=red]Game Over!"
text = "Game Over!"
fit_content_height = true

[node name="MenuButton" type="Button" parent="Canvas/GameOver"]
margin_top = 261.0
margin_right = 186.0
margin_bottom = 281.0
text = "Main Menu"

[node name="Restart" type="Button" parent="Canvas/GameOver"]
margin_top = 285.0
margin_right = 186.0
margin_bottom = 305.0
text = "Try Again"

[node name="Victory" type="Panel" parent="Canvas"]
visible = false
self_modulate = Color( 0.360784, 0.34902, 0.364706, 0.611765 )
margin_left = 398.0
margin_top = 28.0
margin_right = 648.0
margin_bottom = 320.0

[node name="Victory" type="VBoxContainer" parent="Canvas/Victory"]
margin_left = 12.0
margin_top = 14.0
margin_right = 233.0
margin_bottom = 519.0

[node name="VictoryText" type="RichTextLabel" parent="Canvas/Victory/Victory"]
margin_right = 221.0
margin_bottom = 15.0
bbcode_enabled = true
bbcode_text = "[center][wave]VICTORY"
text = "VICTORY"
fit_content_height = true

[node name="VictoryText2" type="RichTextLabel" parent="Canvas/Victory/Victory"]
margin_top = 19.0
margin_right = 221.0
margin_bottom = 169.0
bbcode_enabled = true
bbcode_text = "[center]Thank you so much for playing.

The full game will not end here... it'll have [shake]more bosses, more weapons, and hopefully, more fun.[/shake]

[wave][rainbow]please for the love of all that is holy, help us out and complete this survey[/rainbow][/wave]
*INSERT SURVEY HERE*"
text = "Thank you so much for playing.

The full game will not end here... it'll have more bosses, more weapons, and hopefully, more fun.

please for the love of all that is holy, help us out and complete this survey
*INSERT SURVEY HERE*"
fit_content_height = true

[node name="VictoryText3" type="RichTextLabel" parent="Canvas/Victory/Victory"]
margin_top = 173.0
margin_right = 221.0
margin_bottom = 248.0
bbcode_enabled = true
bbcode_text = "



[center][color=red][shake]WISHLIST ON STEAM"
text = "



WISHLIST ON STEAM"
fit_content_height = true

[node name="VictoryMainMenu" type="Button" parent="Canvas/Victory/Victory"]
margin_top = 252.0
margin_right = 221.0
margin_bottom = 272.0
text = "Main Menu"

[node name="BossOverlay" type="VBoxContainer" parent="Canvas"]
visible = false
margin_left = 11.0
margin_top = 11.0
margin_right = 1012.0
margin_bottom = 51.0

[node name="BossHealthBar" type="ProgressBar" parent="Canvas/BossOverlay"]
margin_right = 1001.0
margin_bottom = 10.0
rect_min_size = Vector2( 0, 10 )
size_flags_horizontal = 3
size_flags_vertical = 1
custom_styles/fg = SubResource( 5 )
custom_styles/bg = SubResource( 6 )
value = 100.0
percent_visible = false

[node name="BossName" type="RichTextLabel" parent="Canvas/BossOverlay"]
margin_top = 14.0
margin_right = 1001.0
margin_bottom = 29.0
bbcode_enabled = true
bbcode_text = "[shake]BOSS NAME"
text = "BOSS NAME"
fit_content_height = true

[node name="GameBoard" type="Node2D" parent="." groups=["gameboard"]]

[connection signal="pressed" from="Canvas/GameOver/MenuButton" to="." method="_on_MenuButton_pressed"]
[connection signal="pressed" from="Canvas/GameOver/Restart" to="." method="_on_Restart_pressed"]
[connection signal="pressed" from="Canvas/Victory/Victory/VictoryMainMenu" to="." method="_on_VictoryMainMenu_pressed"]
